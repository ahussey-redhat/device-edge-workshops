# Generated by the workshop provisioner

{%if run_in_aws is defined and run_in_aws | bool %}
[edge_management_aws]
edge-management-aws ansible_host={{ edge_management_node_facts.instances[0].public_ip_address }} ansible_user={{ edge_management_node_facts.instances[0].tags.username }}

[edge_hypervisor_aws]
edge-hypervisor-aws ansible_host={{ edge_hypervisor_node_facts.instances[0].public_ip_address }} ansible_user={{ edge_hypervisor_node_facts.instances[0].tags.username }}
{% endif %}

[edge_management:children]
edge_management_aws
edge_management_local

[edge_hypervisor:children]
edge_hypervisor_aws
edge_hypervisor_local

{% if attendance %}
[attendance]
{% for host in attendance_host_facts.instances %}
{{ host.tags.short_name }} ansible_host={{ host.public_ip_address }} ansible_user=ec2-user
{%   endfor %}
{% endif %}

{%if run_in_aws is defined and run_in_aws | bool %}
[aws_nodes]
edge-management-aws
edge-hypervisor-aws
{% for host in attendance_host_facts.instances %}
{{ host.tags.short_name }} ansible_host={{ host.public_ip_address }} ansible_user=ec2-user
{%   endfor %}

[all:vars]
{% if ssh_port is defined %}
ansible_port={{ ssh_port }}
ansible_ssh_private_key_file="{{ playbook_dir }}/{{ ec2_name_prefix }}/{{ ec2_name_prefix }}-private.pem"
{% endif %}